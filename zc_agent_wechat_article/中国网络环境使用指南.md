# 中国网络环境使用指南

## 🚀 快速开始

如果您在中国使用本系统，以下服务已经为您配置好，可以直接使用：

### ✅ 已启用且在中国可用的服务

1. **arXiv 论文搜索** 📚
   - 用途：搜索学术论文（计算机科学、物理、数学等）
   - 示例：`"搜索关于 GPT 模型的最新论文"`
   - 优势：完全免费，中国可直接访问

2. **Wikipedia 百科** 📖
   - 用途：查询百科知识、概念解释
   - 示例：`"查询深度学习的定义"`
   - 优势：支持中文内容，知识全面

3. **Fetch HTTP 工具** 🌐
   - 用途：抓取网页内容、调用公开 API
   - 示例：`"抓取某个网站的内容"`
   - 优势：灵活强大，可访问任何可达网站

4. **Browser 浏览器工具** 🖥️
   - 用途：网页浏览、截图、表单填写
   - 示例：`"打开网页并截图"`
   - 优势：功能全面，支持复杂交互

## ⚠️ 可能受限的服务

以下服务已启用但在中国可能需要特殊网络环境：

- **DuckDuckGo Search** - 可能无法访问
- **Brave Search** - 可能无法访问

如果这些服务连接失败，程序会自动跳过并继续运行，不会影响其他功能。

## 🔧 可选的中文服务

如果您需要搜索中文内容，可以在 `tool.py` 中启用以下服务（目前已注释）：

### 1. Bing CN（必应中文搜索）
```python
# 在 tool.py 中找到 "Bing CN MCP client" 部分
# 删除代码块前的 # 注释符号即可启用
```

### 2. WeChat Search（微信公众号搜索）
```python
# 在 tool.py 中找到 "WeChat Search MCP client" 部分
# 删除代码块前的 # 注释符号即可启用
```

### 3. Rednote（小红书搜索）
```python
# 在 tool.py 中找到 "Rednote (Xiaohongshu) MCP client" 部分
# 删除代码块前的 # 注释符号即可启用
```

## 💡 使用建议

### 学术研究场景
```
用户："帮我搜索关于 Transformer 架构的论文"
→ Agent 会使用 arXiv 工具搜索相关论文
```

### 知识查询场景
```
用户："什么是强化学习？"
→ Agent 会使用 Wikipedia 工具查询定义和解释
```

### 网页内容抓取场景
```
用户："帮我获取某个网站的最新文章"
→ Agent 会使用 Fetch 或 Browser 工具抓取内容
```

### 综合任务场景
```
用户："帮我上网搜索关于 agent skill 的文章"
→ Agent 会综合使用多个工具：
  1. 使用 arXiv 搜索学术论文
  2. 使用 Wikipedia 查询基础概念
  3. 使用 Fetch 抓取相关网页内容
  4. 使用 Browser 浏览和截图
```

## 🔍 测试连接

运行程序时，您会看到类似以下的日志输出：

```
INFO - MCP client connected.
INFO - Registered 22 tool functions from MCP: browser_close, browser_resize, ...
INFO - Registered 5 tool functions from MCP: arxiv_search, ...
INFO - Registered 3 tool functions from MCP: wikipedia_search, ...
INFO - Registered 2 tool functions from MCP: fetch, ...
```

如果某个服务连接失败，会显示警告但不会中断程序：

```
Warning: Failed to connect DuckDuckGo MCP client: Connection closed.
Continuing without DuckDuckGo search tools.
```

## 🛠️ 故障排查

### 问题：所有 MCP 服务都连接失败
**解决方案**：
1. 检查 Node.js 是否已安装：`node --version`
2. 检查 npx 是否可用：`npx --version`
3. 尝试手动安装一个包：`npx -y @modelcontextprotocol/server-arxiv`

### 问题：arXiv 或 Wikipedia 连接失败
**解决方案**：
1. 检查网络连接是否正常
2. 尝试访问 https://arxiv.org 确认可以访问
3. 检查防火墙设置

### 问题：想要搜索中文内容
**解决方案**：
1. 启用 Bing CN、WeChat Search 或 Rednote 服务
2. 或者使用 Fetch 工具直接抓取中文网站内容

## 📊 性能优化建议

1. **只启用需要的服务**：如果不需要某些服务，可以注释掉以加快启动速度
2. **优先使用稳定服务**：arXiv、Wikipedia、Fetch 在中国网络环境下最稳定
3. **合理使用 Browser 工具**：Browser 工具功能强大但资源消耗较大，适合复杂任务

## 🎯 最佳实践

### ✅ 推荐做法
- 使用 arXiv 搜索学术论文
- 使用 Wikipedia 查询基础知识
- 使用 Fetch 抓取特定网站内容
- 让 Agent 自动选择合适的工具

### ❌ 不推荐做法
- 不要依赖可能被墙的服务（如 DuckDuckGo）
- 不要在没有测试的情况下启用所有可选服务
- 不要期望所有国外服务都能正常工作

## 📞 获取帮助

如果遇到问题：
1. 查看 `MCP_SEARCH_SERVICES.md` 了解详细配置
2. 检查程序运行日志中的错误信息
3. 确认网络环境和依赖是否正确安装

---

**提示**：本配置已针对中国网络环境优化，默认启用的服务都经过测试，可以在中国正常使用。
